<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2010. M.I.T. All Rights Reserved
  ~ Licensed under the MIT license. Please see http://www.opensource.org/licenses/mit-license.php
  ~ or the license.txt file included in this distribution for the full text of the license.
  -->

<service-builder package-path="com.ext.portlet.models">
    <namespace>Models</namespace>
    <entity name="ModelDiscussion" remote-service="true" local-service="true"
            persistence-class="com.ext.portlet.models.service.persistence.ModelDiscussionPersistenceImpl">
        <!-- PK field -->
        <column name="modelDiscussionId" type="Long" primary="true"/>
        <column name="modelId" type="Long"/>
        <column name="categoryId" type="Long"/>

        <finder name="ModelId" return-type="Collection">
            <finder-column name="modelId"/>
        </finder>

        <finder name="DiscussionId" return-type="Collection">
            <finder-column name="categoryId"/>
        </finder>
    </entity>

    <entity name="ModelPosition" local-service="true"
            persistence-class="com.ext.portlet.models.service.persistence.ModelPositionPersistenceImpl">

        <!-- PK field -->
        <column name="modelId" type="Long" primary="true"/>
        <column name="positionId" type="Long" primary="true"/>

        <!-- Audit fields -->

        <column name="userId" type="Long"/>
        <column name="userName" type="String"/>
        <column name="createDate" type="Date"/>
        <column name="modifiedDate" type="Date"/>

        <!-- Order columns -->

        <order by="asc">
            <order-column name="modelId"/>
            <order-column name="positionId"/>
        </order>

        <!-- Finder methods -->


        <finder name="PositionId" return-type="Collection">
            <finder-column name="positionId"/>
        </finder>
    </entity>

    <entity name="ModelInputGroup" local-service="true" remote-service="true">
        <column name="modelInputGroupPK" type="Long" primary="true"/>
        <column name="modelId" type="Long"/>
        <!-- The meta data element that can provide a name and description for the group -->
        <column name="nameAndDescriptionMetaDataId" type="Long"/>
        <!-- Optional name if no metadata id is provided (above) -->
        <column name="name" type="String"/>
        <column name="description" type="String"/>

        <!-- Sort order for this item in on the page -->
        <column name="groupOrder" type="Integer"/>

        <finder name="ModelId" return-type="Collection">
            <finder-column name="modelId"/>
        </finder>
    </entity>

    <entity name="ModelInputItem" local-service="true" remote-service="true">
        <column name="modelInputItemPK" type="Long" primary="true"/>
        <column name="modelId" type="Long"/>


        <!-- id of the item this entry describes -->
        <column name="modelInputItemID" type="Long"/>

        <!-- optional groupid, indicating association with a group -->
        <column name="modelGroupId" type="Long"/>

        <!-- Sort order for this item; relative to group if part of a group, relative to page if not -->
        <column name="itemOrder" type="Integer"/>

        <!-- Place holder for widget type - e.g. slider, textbox, etc. -->
        <column name="type" type="String"/>

        <finder name="ModelGroupId" return-type="Collection">
            <finder-column name="modelGroupId"/>
        </finder>

        <finder name="ModelInputId" return-type="ModelInputItem">
            <finder-column name="modelInputItemID"/>
        </finder>

        <finder name="ModelId" return-type="Collection">
            <finder-column name="modelInputItemID"/>
        </finder>
        
    </entity>




    <entity name="ModelOutputChartOrder" local-service="true" remote-service="true">
        <column name="modelOutputChartOrderPK" type="Long" primary="true"/>
        <column name="modelId" type="Long"/>

        <!-- variable "name" for the chart this entry describes; recall, output items are grouped into charts depending on the label name -->
        <column name="modelOutputLabel" type="String"/>

        <!-- Sort order for this chart -->
        <column name="modelOutputChartOrder" type="Integer"/>

        <finder name="ModelIdAndLabel" return-type="ModelOutputChartOrder">
            <finder-column name="modelId"/>
            <finder-column name="modelOutputLabel"/>
        </finder>

    </entity>


     <!-- this table is explicitly to indicate ordering of items in charts (e.g. for legends) -->
    <entity name="ModelOutputItem" local-service="true" remote-service="true">
        <column name="modelOutputItemModifierPK" type="Long" primary="true"/>
        <column name="modelId" type="Long"/>

        <!-- id of the model item this entry describes -->
        <column name="modelOutputItemId" type="Long"/>

        <!-- id of the model item this entry is applied to -->
        <column name="modelOutputItemOrder" type="Integer"/>

        <!-- Sort order for this chart -->
        <column name="itemType"  type="String"/>

        <!-- id of another item that this item is "about"; e.g. this may be a confidece interval -->
        <column name="relatedOutputItem" type="Long"/>

        <finder name="ModelOutputId" return-type="ModelOutputItem">
            <finder-column name="modelOutputItemId"/>
        </finder>

    </entity>







<exceptions>
<exception>ModelName</exception>
<exception>NoSuchModelPosition</exception>
<exception>NoSuchModel</exception>
    <exception>NoSuchModelInputGroup</exception>
    <exception>NoSuchModelInputItem</exception>
    <exception>NoSuchModelOutputChartOrder</exception>
    <exception>NoSuchModelOutputItem</exception>

</exceptions>
        </service-builder>