<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces">
    <ice:panelGroup rendered="#{not planBean.editingDescription}">
        <ice:outputText value="#{planBean.plan.description}" escape="false"/>
        <div>
            <ice:commandButton value="Edit" actionListener="#{planBean.editDescription}"/>
        </div>
    </ice:panelGroup>
    
    <ice:panelGroup rendered="#{planBean.editingDescription}">
        <div class="versionsContainer relative">
                <div class="versions">
                    <ice:selectOneListbox  immediate="true" value="#{planBean.plan.descriptionVersion}"
                                      valueChangeListener="#{planBean.plan.descriptionVersion}" partialSubmit="true">
                        <f:selectItems value="#{planBean.plan.allDescriptionVersions}"/> 
                    </ice:selectOneListbox>
                </div>
                <div class="versionsTrigger">V<br />E<br />R<br />S<br />I<br />O<br />N<br />S<br /></div>
                <div class="clear"></div>
                
        </div>
        <div class="descriptionInput">
            <ice:inputRichText value="#{planBean.plan.description}" toolbar="Basic"  saveOnSubmit="true" />
            <ice:commandButton value="Save" actionListener="#{planBean.plan.saveDescription}"/>
        </div>
    </ice:panelGroup>
    <script language="javascript">
    jQuery(document).ready(initVersionChoosingBox);
    </script>
</f:view>