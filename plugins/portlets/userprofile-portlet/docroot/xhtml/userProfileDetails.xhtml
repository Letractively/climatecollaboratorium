<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    >
   
    <div id="content">
  
    <div id="main">
    
      <div class="comm_member">
        <div class="comm_member-photo">
            <img src="#{currentUser.portrait}" width="150" height="150" alt="#{currentUser.realName}" />
        </div>
        <div class="comm_member-info">
          <table border="0" cellpadding="0" cellspacing="0" class="colab members">
            <tr><td colspan="2"><h2>Member Profile</h2></td></tr>
            <tr><td class="memname">#{currentUser.realName}</td><td class="r btm">
                <ice:form>
                    <ice:commandLink rendered="#{userprofileBean.viewingOwnProfile}" actionListener="#{userprofileBean.toggleEditing}">
                        Manage profile and settings &gt;&gt;
                    </ice:commandLink>
                </ice:form>
                <f:subview rendered="#{not userprofileBean.viewingOwnProfile}">
                    <a href="javascript:;" class="openpoplogin">Send #{currentUser.firstName} a Message </a>
                </f:subview>
            </td></tr>
          </table>
          <div class="memdiv"></div>
          <table border="0" cellpadding="0" cellspacing="0" class="colab members">
            <tr><td class="b">Screen Name</td><td>#{currentUser.screenName}</td></tr>
            <tr><td class="b">Member Since</td><td>
                <ice:outputText value="#{currentUser.joinDate}" >
                    <f:convertDateTime pattern="MM/dd/yy"/>
                </ice:outputText>
            </td></tr>
            <tr><td class="b">Email</td><td><a href="mailto:#{currentUser.email}">#{currentUser.email}</a></td></tr>
          </table>
        </div>
        <div class="clearfix"></div>
      </div>
      #{currentUser.filteredAbout}
      

    <h2>Supporting</h2>
        <ice:dataTable var="supportedPlan" value="#{currentUser.supportedPlans}" styleClass="colab" rowClasses="t,nt">
            <ice:column>
                #{supportedPlan.planName}
            </ice:column>
            
            <ice:column style="width: 70px">
                <ice:outputText value="#{supportedPlan.createdDate}">
                    <f:convertDateTime pattern="MM/dd/yy"/>
                </ice:outputText>
            </ice:column>
        
        </ice:dataTable>
        

    <h2>Activity feed</h2>
        <ice:dataTable styleClass="colab" value="#{currentUser.activities}" rowClasses="t,nt" var="activity">
            <ice:column>
                #{activity.body}
            </ice:column>
            <ice:column>
                <ice:outputText value="#{activity.createdDate}">
                    <f:convertDateTime pattern="MM/dd/yy"/>
                </ice:outputText>
            </ice:column>
        
        </ice:dataTable>

        </div> <!-- /main -->
        <div class="clearfix"></div>

  </div> <!-- /content -->
   
</f:view>
