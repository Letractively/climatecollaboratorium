<?xml version="1.0"?>
<f:view
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ice="http://www.icesoft.com/icefaces/component"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:collab="http://climatecollaboratorium.org/facelets"
        xmlns:sharedcollab="http://climatecollaboratorium.org/components">
        
    <ui:composition template="../templates/contestPageTemplate.xhtml">
        <ui:define name="contest_content">
            <f:subview rendered="#{contests.contest.editor.editingPositions}">
                <ice:form>
                    <h2>Choose debates that you want to associate with contest</h2>
                    <div>
                        <ice:selectManyCheckbox value="#{contests.contest.editor.contestDebates}" layout="pageDirection">
                            <f:selectItems value="#{contests.contest.editor.availableDebatesItems}" />
                        </ice:selectManyCheckbox>
                    </div>
                    <ice:commandButton action="#{contests.contest.editor.editPositions}"  value="Ok" />
                </ice:form>
            </f:subview>
            
            <f:subview rendered="#{not contests.contest.editor.editingPositions}">
                <ice:form>
                    <ice:commandButton action="#{contests.contest.editor.editPositions}" value="Edit" rendered="#{permissions.canAdminAll}" />
                </ice:form>
                <ice:form>
                <sharedcollab:helpMessage messageId="planDebatesHelp" styleClass="planHelp"
                                      hideThisMessage="Hide this message">
                Several key debates are at the heart of the global conversation about international climate agreements.
                <a href="/web/guest/resources/-/wiki/Main/What+Are+Debates">See more</a>.
            </sharedcollab:helpMessage>
            <sharedcollab:helpMessageTrigger
                    messageId="planDebatesHelp">+show help</sharedcollab:helpMessageTrigger>
                </ice:form>
                <collab:debatesDetails debateDetailsBean="#{debatesDetailsBean}" debatesIds="#{contests.contest.debatesIds}" 
                        linkPatternPrefix="#plans=contests:#{contests.contest.contestActive ? 'active' : 'past'},subview:issues;" />
            </f:subview>
        </ui:define>
    </ui:composition>
</f:view>