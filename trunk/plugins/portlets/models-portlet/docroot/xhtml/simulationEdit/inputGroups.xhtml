<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:jstl="http://java.sun.com/jsp/jstl/functions" 
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:c="http://java.sun.com/jsp/jstl/core">


    <table class="inputGroupsContainer">
        <tr>
            <td class="groupsCell">
                <ice:commandButton value="Add new group" />
                    <f:subview id="subview">
                        <ui:include src="inputGroupEdit.xhtml">
                            <ui:param name="input" value="#{simulationBean.newGroupWrapper}" />
                        </ui:include>
                    </f:subview>
                <ice:panelSeries value="#{simulationBean.display.inputs}" var="input" styleClass="inputGroupDef">
                    <ice:panelGroup rendered="#{input.displayItemType == 'GROUP'}" styleClass="inputGroup" >
                        <h3>#{input.name}
                            <ice:commandButton value="Edit" actionListener="#{simulationBean.wrappedInputs[input].edit}"/>
                            <ice:commandButton value="Delete" actionListener="#{simulationBean.wrappedInputs[input].delete}"/>
                        </h3>
                        <p>
                            #{input.description}
                        </p>
                        <h4>Grouped inputs</h4>
                        <ul class="groupedInputs ui-widget-content ui-corner-all" title="#{input.groupId}">
                            <ui:repeat value="#{input.displayItems}" var="item">
                                <li class="individualInput">
                                    <ice:outputText value="#{item.name}"/> 
                                    <ice:inputText value="#{item.groupId}" styleClass="hidden"/>
                                </li>
                            </ui:repeat>
                            <li class="individualInputPlaceholder"></li>
                        </ul>
                    </ice:panelGroup> 
                </ice:panelSeries>
            </td>
            <td class="availableItemsCell">
                <h4>Available inputs</h4>
                <ul class="availableGroupItems ui-widget-content ui-corner-all" title="#{input.groupId}">
                    <ui:repeat value="#{simulationBean.display.inputs}" var="item">
                        <li class="#{item.displayItemType == 'INDIVIDUAL' ? 'individualInput' : ''}">
                            <ice:outputText value="#{item.name}"  rendered="#{item.displayItemType == 'INDIVIDUAL'}" /> 
                            <ice:inputText value="#{item.groupId}"  rendered="#{item.displayItemType == 'INDIVIDUAL'}" styleClass="hidden" />
                        </li>
                    </ui:repeat>
                    <li class="individualInputPlaceholder"></li>
                </ul>
            </td>
        </tr>
    </table>
    <ice:commandButton value="Update" actionListener="#{simulationBean.updateInputs}" styleClass="inputsWidgetsUpdate"/>
    <f:subview>
        <ui:include src="editJsWidgets.xhtml" />
    </f:subview>
</f:view>