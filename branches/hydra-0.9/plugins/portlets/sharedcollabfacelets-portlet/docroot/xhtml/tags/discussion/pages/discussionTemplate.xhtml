<?xml version="1.0" encoding="UTF-8"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:collab="http://climatecollaboratorium.org/facelets"
    xmlns:liferay-faces="http://liferay.com/tld/faces">
    <div class="discussion">
        <div class="messagesArea">
            <ice:messages />
        </div>
        <div class="searchArea">
            <ice:inputText styleClass="searchBox" value="#{discussionBean.searchQuery}" />
            <ice:commandButton value="Search" actionListener="#{discussionBean.search}" />
        </div>

        <table class="discussionContainer">
            <tr>
                <td class="sidebar">
                    <div>
                        <ice:commandButton actionListener="#{discussionBean.changePageType}" value="Manage permissions" rendered="#{discussionBean.permissions.canAdmin}">
                            <f:attribute name="pageType" value="PERMISSIONS_CONFIG" />
                        </ice:commandButton>
                        
                        <ice:commandButton actionListener="#{discussionBean.changePageType}" value="Start a new discussion" rendered="#{discussionBean.permissions.canAddThread}" styleClass="addNewDiscussion">
                            <f:attribute name="pageType" value="THREAD_ADD"/>
                        </ice:commandButton>
                    </div>
                
                    <div class="area">
                        <h3 class="areaLabel">Quick links</h3>
                        <ul>
                            <li>
                                <ice:commandLink actionListener="#{discussionBean.changePageType}" value="Discussions" onclick="Collab.nav.navigate('discussion', {pageType: 'DISCUSSIONS'}); return;">
                                    <f:attribute name="pageType" value="DISCUSSIONS" />
                                </ice:commandLink>
                            </li>
                            <li>
                                <ice:commandLink actionListener="#{discussionBean.changePageType}" value="Categories" onclick="Collab.nav.navigate('discussion', {pageType: 'CATEGORIES'}); return;">
                                    <f:attribute name="pageType" value="CATEGORIES" />
                                </ice:commandLink>
                            </li>
                        </ul>
                    </div>
                    <div class="area">
                        <h3 class="areaLabel">Social</h3>
                        <ul>
                            <li><ice:commandLink actionListener="#{discussionBean.subscribe}">Subscribe</ice:commandLink></li>
                        </ul>
                    </div>
                </td>
                <td class="discussion">
                    <div class="discussionActions">
                        <ui:insert name="discussion_actions"/>
                    </div>
                    <h3 class="areaLabel"><ui:insert name="discussion_breadcrumb" /></h3>
                    <ui:insert name="discussion_content"/>                    
                 </td>
            </tr>
        
        </table>
    </div>
</f:view>