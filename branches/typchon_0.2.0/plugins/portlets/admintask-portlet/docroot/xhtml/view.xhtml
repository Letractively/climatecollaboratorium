<?xml version="1.0"?>
<!--
  ~ Copyright (c) 2010. M.I.T. All Rights Reserved
  ~ Licensed under the MIT license. Please see http://www.opensource.org/licenses/mit-license.php
  ~ or the license.txt file included in this distribution for the full text of the license.
  -->
<f:view
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:collab="http://climatecollaboratorium.org/facelets"
    >
    <ice:portlet>
        <ice:outputStyle href="/xmlhttp/css/xp/xp-portlet.css"/>
        <h1>Admin tasks</h1>
                    
        <ice:form>
            <ice:messages globalOnly="false" layout="table" />
            <ice:outputConnectionStatus />
            <ice:panelTabSet styleClass="componentPanelTabSetLayout">
                <ice:panelTab label="Commons">
                    <ul>
                        <li><ice:commandButton action="#{adminTask.removeBlogsFormatting}" value="Remove formatting from blog etries"/></li>
                        <li><ice:commandButton action="#{adminTask.removeProposalFormatting}" value="Remove formatting from proposals"/></li>
                        <li><ice:commandButton action="#{adminTask.updatePitchForProposals}" value="Update pitch for old plans"/></li>
                        <li><ice:commandButton action="#{adminTask.fixWikiPermissions}" value="Fix wiki permissions"/></li>
                        <li><ice:commandButton action="#{adminTask.fixContestsDiscussionPermissions}" value="Fix discussion permissions"/></li>
                        <li><ice:commandButton action="#{adminTask.fixResourceReferencesInPermissions}" value="Fix permissions (bad references to resources)"/></li>
                    </ul>
                </ice:panelTab>
                <ice:panelTab label="Plan section description">
                    <ice:panelGrid cellspacing="0" columnClasses="col1, col2" rowClasses="odd, even" cellpadding="5" columns="2">
                        <ice:outputLabel value="Contest" />
                        <ice:selectOneMenu valueChangeListener="#{templateAdminBean.changeContest}" value="#{templateAdminBean.selectedContestId}" partialSubmit="true">
                            <f:selectItems value="#{templateAdminBean.availableContests}" />
                        </ice:selectOneMenu>
                        <ice:outputLabel value="Section" />
                        <ice:selectOneMenu valueChangeListener="#{templateAdminBean.changeSection}" value="#{templateAdminBean.selectedSectionId}" partialSubmit="true">
                            <f:selectItems value="#{templateAdminBean.availableSections}" />
                        </ice:selectOneMenu>
           
                        <ice:commandButton action="#{templateAdminBean.populateSectionWithDescription}" value="Copy plan description to selected section (if it is empty)"/>
                    </ice:panelGrid>
                </ice:panelTab>
            </ice:panelTabSet>
            
            
        </ice:form>
    </ice:portlet>
</f:view>         


